## 반정규화

> 시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로, 의도적으로 정규화 원칙을 위배하는 행위

- 반정규화를 수행하면 시스템의 성능이 향상되고 관리 효율성은 증가하지만, 데이터의 일관성 및 정합성이 저하될 수 있다
- 과도한 반정규화는 오히려 성능을 저하할 수 있다
- 반정규화를 위해서는 사전에 데이터의 일관성과 무결성을 우선으로 할지, 데이터베이스의 성능과 단순활르 우선으로 할지를 결정해야 한다
- 테이블 통합, 테이블 분할, 중복 테이블 추가, 중복 속성 추가 등

### 테이블 통합

두 개의 테이블이 조인되는 경우가 많아  
하나의 테이블로 합쳐 사용하는 것이 성능 향상에 도움이 될 경우 수행

- 데이터 검색은 간편하지만 레코드 증가로 인해 처리량이 증가한다
- 테이블 통합으로 인해 입력, 수정, 삭제 규칙이 복잡해질 수 있다
- Not Null, Default, Check 등 제약조건을 설계하기 어렵다

#### 종류

- 1:1 관계 테이블 통합
- 1:N 관계 테이블 통합
- 슈퍼타입/서브타입 테이블 통합

#### 예시

| 학번   | 담당교수 |
| ------ | -------- |
| 201001 | 홍길동   |
| 201002 | 유관순   |
| 201003 | 윤봉길   |
| 201004 | 홍길동   |
| 201005 | 이순신   |
| 201006 | 유관순   |

| 담당교수 | 과목명   |
| -------- | -------- |
| 홍길동   | 정보처리 |
| 이순신   | 정보처리 |
| 윤봉길   | 인공지능 |
| 유관순   | 네트워크 |

▽

| 학번   | 담당교수 | 과목명   |
| ------ | -------- | -------- |
| 201001 | 홍길동   | 정보처리 |
| 201002 | 유관순   | 네트워크 |
| 201003 | 윤봉길   | 인공지능 |
| 201004 | 홍길동   | 정보처리 |
| 201005 | 이순신   | 정보처리 |
| 201006 | 유관순   | 네트워크 |

### 테이블 분할

- 기본키의 유일성 관리가 어려워진다
- 데이터 양이 적거나 사용빈도가 낮은 경우 테이블 분할이 필요한지를 고려해야 한다
- 분할된 테이블로 인해 수행 속도가 느려질 수 있다
- 데이터 검색에 중점을 두어 테이블 분할 여부를 결정해야 한다

#### 예시

| 학번   | 담당교수 | 과목명   |
| ------ | -------- | -------- |
| 201001 | 홍길동   | 정보처리 |
| 201002 | 유관순   | 네트워크 |
| 201003 | 윤봉길   | 인공지능 |
| 201004 | 홍길동   | 정보처리 |
| 201005 | 이순신   | 정보처리 |
| 201006 | 유관순   | 네트워크 |

▷ 수평 분할

| 학번   | 담당교수 | 과목명   |
| ------ | -------- | -------- |
| 201001 | 홍길동   | 정보처리 |
| 201002 | 유관순   | 네트워크 |
| 201003 | 윤봉길   | 인공지능 |

| 학번   | 담당교수 | 과목명   |
| ------ | -------- | -------- |
| 201004 | 홍길동   | 정보처리 |
| 201005 | 이순신   | 정보처리 |
| 201006 | 유관순   | 네트워크 |

▷ 수직 분할

| 학번   | 담당교수 |
| ------ | -------- |
| 201001 | 홍길동   |
| 201002 | 유관순   |
| 201003 | 윤봉길   |
| 201004 | 홍길동   |
| 201005 | 이순신   |
| 201006 | 유관순   |

| 학번   | 과목명   |
| ------ | -------- |
| 201001 | 정보처리 |
| 201002 | 네트워크 |
| 201003 | 인공지능 |
| 201004 | 정보처리 |
| 201005 | 정보처리 |
| 201006 | 네트워크 |

### 중복 테이블 추가

여러 테이블에서 데이터를 추출해서 사용해야 하거나 다른 서버에 저장된 테이블을 이용해야 하는 경우 중복 테이블을 추가하여 작업의 효율성을 향상시킬 수 있다

#### 중복 테이블을 추가하는 경우

- 정규화로 인해 수행 속도가 느려지는 경우
- 많은 범위의 데이터를 자주 처리해야 하는 경우
- 특정 범위의 데이터를 자주 처리해야 하는 경우
- 처리 범위를 줄이지 않고는 수행 속도를 개선할 수 없는 경우

#### 중복 테이블을 추가하는 방법

- 집계 테이블의 추가: 집계 데이터를 위한 테이블을 생성하고, 각 원본 테이블에 트리거를 설정하여 사용하는 것으로, 트리거의 오버헤드에 유의해야 한다
- 진행 테이블의 추가: 이력 관리 등의 목적으로 추가하는 테이블로, 적절한 데이터 양의 유지와 활용도를 높이기 위해 기본키를 적절히 설정한다
- 특정 부분만을 포함하는 테이블의 추가: 데이터가 많은 테이블의 특정 부분만을 사용하는 경우 해당 부분만으로 새로운 테이블을 생성한다

### 중복 속성 추가

조인해서 데이터를 처리할 때 데이터를 조회하는 경로를 단축하기 우해 자주 사용하는 속성 하나 더 추가하는 것

- 중복 속성을 추가하면 데이터의 무결성 확보가 어렵고, 디스크 공간이 추가로 필요하다

#### 중복 속성을 추가하는 경우

- 조인이 자주 발생하는 속성인 경우
- 접근 경로가 복잡한 속성인 경우
- 액세스의 조건으로 자주 사용되는 속성인 경우
- 기본키의 형태가 적절하지 않거나 여러 개의 속성으로 구성된 경우

#### 중복 속성 추가 시 고려 사항

- 테이블 중복과 속성의 중복을 고려
- 데이터 일관성 및 무결성에 유의
- SQL 그룹 함수를 이용하여 처리할 수 있어야 한다
- 저장 공간의 지나친 낭비를 고려
